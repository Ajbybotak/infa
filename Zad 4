#include <iostream>
#include <string>
#include <vector>
#include <algorithm>
using namespace std;

int main() {
    string tekst, klucz;
    cout << "Podaj tekst zaszyfrowany (DUZE LITERY, BEZ SPACJI) ";
    cin >> tekst;
    cout << "Podaj klucz (slowo) ";
    cin >> klucz;

    int kolumny = klucz.length();
    int wiersze = tekst.length() / kolumny;

    vector<int> indeksy(kolumny);
    for (int i = 0; i < kolumny; i++) indeksy[i] = i;
    sort(indeksy.begin(), indeksy.end(), [&](int a, int b) {
        return klucz[a] < klucz[b];
    });

    vector<vector<char>> tab(wiersze, vector<char>(kolumny));
    int idx = 0;
    for (int x = 0; x < kolumny; x++)
        for (int i = 0; i < kolumny; i++)
            if (indeksy[i] == x)
                for (int j = 0; j < wiersze; j++)
                    tab[j][i] = tekst[idx++];

    string wynik;
    wynik.resize(tekst.length());
    idx = 0;
    for (int i = 0; i < wiersze; i++)
        for (int j = 0; j < kolumny; j++)
            wynik[idx++] = tab[i][j];

    cout << "Odszyfrowany tekst " << wynik << endl;
    return 0;
}
