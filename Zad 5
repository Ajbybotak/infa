#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main() {
    ifstream wej("wejscie.txt");
    if (!wej) {
        cout << "Blad brak pliku wejscie.txt" << endl;
        return 1;
    }

    string tekst, linia;
    while (getline(wej, linia)) tekst += linia;
    wej.close();

    string czysty;
    for (int i = 0; i < tekst.length(); i++)
        if (tekst[i] != ' ') czysty += toupper(tekst[i]);

    int n = 1;
    while (n * n < czysty.length()) n++;

    char tab[200][200];
    for (int i = 0; i < n; i++)
        for (int j = 0; j < n; j++)
            tab[i][j] = 'X';

    int idx = 0;
    for (int i = 0; i < n && idx < czysty.length(); i++)
        for (int j = 0; j < n && idx < czysty.length(); j++)
            tab[i][j] = czysty[idx++];

    string wynik;
    wynik.resize(n * n);
    int g = 0, d = n - 1, l = 0, p = n - 1;
    idx = 0;

    while (g <= d && l <= p) {
        for (int j = l; j <= p; j++) wynik[idx++] = tab[g][j];
        g++;
        for (int i = g; i <= d; i++) wynik[idx++] = tab[i][p];
        p--;
        for (int j = p; j >= l && g <= d; j--) wynik[idx++] = tab[d][j];
        d--;
        for (int i = d; i >= g && l <= p; i--) wynik[idx++] = tab[i][l];
        l++;
    }

    ofstream wyj("wynik.txt");
    wyj << wynik;
    wyj.close();

    cout << "Tekst zaszyfrowano metoda spiralna i zapisano w pliku wynik.txt" << endl;
    return 0;
}
